{"index.html":"<html><head><script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section e-rte-custom-tbar-section\">\n    <div class=\"sample-container\">\n        <div class=\"default-section\" id=\"rteSection\">\n            <div id=\"defaultRTE\">\n                <div style=\"display:block;\"><p style=\"margin-right:10px\">The custom command &quot;insert special character&quot; is configured as the last item of the toolbar. Click on the command and choose the special character you want to include from the popup.</p></div>     \n            </div>\n            <div id=\"customTbarDialog\" style=\"display: none\">\n                <div id=\"rteSpecial_char\">\n                    <div class=\"char_block\" title=\"^\">^</div>\n                    <div class=\"char_block\" title=\"_\">_</div>\n                    <div class=\"char_block\" title=\"`\">`</div>\n                    <div class=\"char_block\" title=\"{\">{</div>\n                    <div class=\"char_block\" title=\"|\">|</div>\n                    <div class=\"char_block\" title=\"}\">}</div>\n                    <div class=\"char_block\" title=\"~\">~</div>\n                    <div class=\"char_block\" title=\"&#xA0;\">&#xA0;</div>\n                    <div class=\"char_block\" title=\"&#xA1;\">&#xA1;</div>\n                    <div class=\"char_block\" title=\"&#xA2;\">&#xA2;</div>\n                    <div class=\"char_block\" title=\"&#xA3;\">&#xA3;</div>\n                    <div class=\"char_block\" title=\"&#xA4;\">&#xA4;</div>\n                    <div class=\"char_block\" title=\"&#xA5;\">&#xA5;</div>\n                    <div class=\"char_block\" title=\"&#x20B9;\">&#x20B9;</div>\n                    <div class=\"char_block\" title=\"&#xA6;\">&#xA6;</div>\n                    <div class=\"char_block\" title=\"&#xA7;\">&#xA7;</div>\n                    <div class=\"char_block\" title=\"&#xA8;\">&#xA8;</div>\n                    <div class=\"char_block\" title=\"&#xA9;\">&#xA9;</div>\n                    <div class=\"char_block\" title=\"&#xAA;\">&#xAA;</div>\n                    <div class=\"char_block\" title=\"&#xAB;\">&#xAB;</div>\n                    <div class=\"char_block\" title=\"&#xAC;\">&#xAC;</div>\n                    <div class=\"char_block\" title=\"&#xAD;\">&#xAD;</div>\n                    <div class=\"char_block\" title=\"&#xAE;\">&#xAE;</div>\n                    <div class=\"char_block\" title=\"&#xAF;\">&#xAF;</div>\n                    <div class=\"char_block\" title=\"&#xB0;\">&#xB0;</div>\n                    <div class=\"char_block\" title=\"&#xB1;\">&#xB1;</div>\n                    <div class=\"char_block\" title=\"&#xB2;\">&#xB2;</div>\n                    <div class=\"char_block\" title=\"&#xB3;\">&#xB3;</div>\n                    <div class=\"char_block\" title=\"&#xB4;\">&#xB4;</div>\n                    <div class=\"char_block\" title=\"&#xB5;\">&#xB5;</div>\n                    <div class=\"char_block\" title=\"&#xB6;\">&#xB6;</div>\n                    <div class=\"char_block\" title=\"&#xB7;\">&#xB7;</div>\n                    <div class=\"char_block\" title=\"&#xB8;\">&#xB8;</div>\n                    <div class=\"char_block\" title=\"&#xB9;\">&#xB9;</div>\n                    <div class=\"char_block\" title=\"&#xBA;\">&#xBA;</div>\n                    <div class=\"char_block\" title=\"&#xBB;\">&#xBB;</div>\n                    <div class=\"char_block\" title=\"&#xBC;\">&#xBC;</div>\n                    <div class=\"char_block\" title=\"&#xBD;\">&#xBD;</div>\n                    <div class=\"char_block\" title=\"&#xBE;\">&#xBE;</div>\n                    <div class=\"char_block\" title=\"&#xBF;\">&#xBF;</div>\n                    <div class=\"char_block\" title=\"&#xC0;\">&#xC0;</div>\n                    <div class=\"char_block\" title=\"&#xC1;\">&#xC1;</div>\n                    <div class=\"char_block\" title=\"&#xC2;\">&#xC2;</div>\n                    <div class=\"char_block\" title=\"&#xC3;\">&#xC3;</div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n<style>\n    .e-rte-custom-tbar-section #special_char,\n    .e-rte-custom-tbar-section .char_block {\n        display: inline-block;\n    }\n\n    #custom_tbar,\n    #custom_tbar div{\n        cursor: pointer;\n        font-size: 16px;\n    }\n\n    .e-bigger #custom_tbar div {\n        font-size: 18px;\n    }\n\n    #rteSpecial_char {\n        padding: 15px 0 15px 0;\n    }\n\n    .material .e-rte-custom-tbar-section .char_block.e-active {\n        outline: 1px solid #e3165b;\n        border-color: #e3165b;\n    }\n\n    .fabric .e-rte-custom-tbar-section .char_block.e-active {\n        outline: 1px solid #0078d6;\n        border-color: #0078d6;\n    }\n\n    .bootstrap .e-rte-custom-tbar-section .char_block.e-active {\n        outline: 1px solid #317ab9;\n        border-color: #317ab9;\n    }\n\n    .highcontrast .e-rte-custom-tbar-section .char_block.e-active {\n        outline: 1px solid #ffd939;\n        border-color: #ffd939;\n    }\n\n    .fabric.e-bigger .e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn .e-tbar-btn-text,\n    .highcontrast.e-bigger .e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn .e-tbar-btn-text {\n        padding-right: 10px;\n    }\n\n    .bootstrap.e-bigger .e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn .e-tbar-btn-text,\n    .bootstrap .e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn .e-tbar-btn-text {\n        padding-right: 6px;\n    }\n\n    .fabric .e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn .e-tbar-btn-text,\n    .highcontrast .e-toolbar .e-toolbar-items .e-toolbar-item .e-tbar-btn.e-btn .e-tbar-btn-text {\n        padding-right: 8px;\n    }\n\n    .e-rte-custom-tbar-section .char_block {\n        width: 30px;\n        height: 30px;\n        line-height: 30px;\n        margin: 0 5px 5px 0;\n        text-align: center;\n        vertical-align: middle;\n        border: 1px solid #DDDDDD;\n        font-size: 20px;\n        cursor: pointer;\n        user-select: none;\n    }\n\n    @media (min-width: 320px) and (max-width: 480px) {\n        .fabric.e-bigger #customTbarDialog {\n            min-width: 281px;\n        }\n\t\t\n\t\t#rteSpecial_char {\n        padding: 15px 0 15px 20px;\n\t\t}\n\n        .fabric #customTbarDialog {\n            min-width: 241px;\n        }\n\n        .bootstrap.e-bigger #customTbarDialog,\n        .bootstrap #customTbarDialog {\n            min-width: 223px;\n        }\n\n        .highcontrast.e-bigger #customTbarDialog {\n            min-width: 283px;\n        }\n        .highcontrast #customTbarDialog {\n            min-width: 243px;\n        }\n        .material #customTbarDialog {\n            min-width: 224px;\n        }\n        .material.e-bigger #customTbarDialog {\n            min-width: 236px;\n        }\n    }\n</style>\n\n","index.js":"{{ripple}}/*jshint esversion: 6 */\r\n/**\r\n * RichTextEditor insert special characters sample\r\n */\r\n\r\n    var selection = new ej.richtexteditor.NodeSelection();\r\n    var range;\r\n    var dialog;\r\n    var customBtn;\r\n    var dialogCtn;\r\n    var saveSelection;\r\n    var defaultRTE = new ej.richtexteditor.RichTextEditor({\r\n        toolbarSettings: {\r\n            items: ['Bold', 'Italic', 'Underline', '|', 'Formats', 'Alignments', 'OrderedList',\r\n                'UnorderedList', '|', 'CreateLink', 'Image', '|', 'SourceCode',\r\n                {\r\n                    tooltipText: 'Insert Symbol',\r\n                    template: '<button class=\"e-tbar-btn e-btn\" tabindex=\"-1\" id=\"custom_tbar\"  style=\"width:100%\"><div class=\"e-tbar-btn-text\" style=\"font-weight: 500;\"> &#937;</div></button>'\r\n                }, '|', 'Undo', 'Redo'\r\n            ]\r\n        },\r\n        created: onCreate,\r\n        actionComplete: actionCompleteHandler\r\n    });\r\n    defaultRTE.appendTo('#defaultRTE');\r\n\r\n    function onCreate() {\r\n        customBtn = defaultRTE.element.querySelector('#custom_tbar');\r\n        dialogCtn = document.getElementById('rteSpecial_char');\r\n        dialog = new ej.popups.Dialog({\r\n            header: 'Special Characters',\r\n            content: dialogCtn,\r\n            target: document.getElementById('rteSection'),\r\n            showCloseIcon: false,\r\n            isModal: true,\r\n            width: '43%',\r\n            height: 'auto',\r\n            overlayClick: dialogOverlay,\r\n            buttons: [\r\n                { buttonModel: { content: \"Insert\", isPrimary: true }, click: onInsert },\r\n                { buttonModel: { content: 'Cancel' }, click: dialogOverlay }\r\n            ],\r\n            created: onDialogCreate,\r\n        });\r\n        dialog.appendTo('#customTbarDialog');\r\n        dialog.hide();\r\n        customBtn.onclick = function (e) {\r\n            defaultRTE.contentModule.getEditPanel().focus();\r\n            dialog.element.style.display = '';\r\n            range = selection.getRange(document);\r\n            saveSelection = selection.save(range, document);\r\n            dialog.show();\r\n        };\r\n    }\r\n    function onDialogCreate() {\r\n        var dialogCtn = document.getElementById('rteSpecial_char');\r\n        dialogCtn.onclick = function (e) {\r\n            var target = e.target;\r\n            var activeEle = dialog.element.querySelector('.char_block.e-active');\r\n            if (target.classList.contains('char_block')) {\r\n                target.classList.add('e-active');\r\n                if (activeEle) {\r\n                    activeEle.classList.remove('e-active');\r\n                }\r\n            }\r\n        };\r\n    }\r\n    function onInsert() {\r\n        var activeEle = dialog.element.querySelector('.char_block.e-active');\r\n        if (activeEle) {\r\n            if (defaultRTE.formatter.getUndoRedoStack().length === 0) {\r\n                defaultRTE.formatter.saveData();\r\n            }\r\n            saveSelection.restore();\r\n            defaultRTE.executeCommand('insertText', activeEle.textContent);\r\n            defaultRTE.formatter.saveData();\r\n            defaultRTE.formatter.enableUndo(defaultRTE);\r\n        }\r\n        dialogOverlay();\r\n    }\r\n    function dialogOverlay() {\r\n        var activeEle = dialog.element.querySelector('.char_block.e-active');\r\n        if (activeEle) {\r\n            activeEle.classList.remove('e-active');\r\n        }\r\n        dialog.hide();\r\n    }\r\n    function actionCompleteHandler(e) {\r\n        if (e.requestType === 'SourceCode') {\r\n          defaultRTE.getToolbar().querySelector('#custom_tbar').parentElement.classList.add('e-overlay');\r\n        } else if (e.requestType === 'Preview') {\r\n          defaultRTE.getToolbar().querySelector('#custom_tbar').parentElement.classList.remove('e-overlay');\r\n        }\r\n    }\r\n\r\n    "}