{"index.html":"<html><head><script src=\"//npmci.syncfusion.com/development/demos/diagram/mind-map/datasource.js\" type=\"text/javascript\"></script>\n<script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section\">\n    <div class=\"content-wrapper\" style=\"width: 100%\">\n        <div id=\"diagram\"></div>\n    </div>\n</div>\n\n</div></body></html>","index.js":"{{ripple}}/*jshint esversion: 6 */\r\nej.diagrams.Diagram.Inject(ej.diagrams.DataBinding, ej.diagrams.MindMap, ej.diagrams.HierarchicalTree);\r\nvar diagram;\r\n\r\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__; var __extends = (this && this.__extends) || (function () {\r\n    var extendStatics = Object.setPrototypeOf ||\r\n        /* jshint proto: true */\r\n        ({ __proto__: [] } instanceof Array && function (der, b) { der.__proto__ = b; }) ||\r\n        function (der, b) { for (var p in b) if (b.hasOwnProperty(p)) der[p] = b[p]; };\r\n    return function (der, b) {\r\n        extendStatics(der, b);\r\n        function __() { this.constructor = der; }\r\n        der.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n    };\r\n})();\r\n/**\r\n * Mind-map sample\r\n */\r\n\r\nfunction selectionChange(arg) {\r\n    if (arg.state === 'Changing') {\r\n        if (arg.newValue[0] instanceof ej.diagrams.Node) {\r\n            for (var _i = 0, _a = diagram.selectedItems.userHandles; _i < _a.length; _i++) {\r\n                var handle_1 = _a[_i];\r\n                handle_1.visible = true;\r\n            }\r\n            if (arg.newValue[0].data.branch === 'Left' ||\r\n                arg.newValue[0].data.branch === 'subLeft') {\r\n                hideUserHandle('leftHandle');\r\n                changeUserHandlePosition('leftHandle');\r\n            }\r\n            else if (arg.newValue[0].data.branch === 'Right' ||\r\n                arg.newValue[0].data.branch === 'subRight') {\r\n                hideUserHandle('rightHandle');\r\n                changeUserHandlePosition('rightHandle');\r\n            }\r\n            else if (arg.newValue[0].data.branch === 'Root') {\r\n                hideUserHandle('delete');\r\n            }\r\n        }\r\n        else {\r\n            hideUserHandle('leftHandle');\r\n            hideUserHandle('rightHandle');\r\n            hideUserHandle('delete');\r\n        }\r\n    }\r\n}\r\n\r\nfunction getNodeDefaults(obj) {\r\n    obj.constraints = ej.diagrams.NodeConstraints.Default & ~ej.diagrams.NodeConstraints.Drag;\r\n    if (obj.data.branch === 'Left' || obj.data.branch === 'Right' || obj.data.branch === 'Root') {\r\n        obj.shape = { type: 'Basic', shape: 'Ellipse' };\r\n        obj.borderColor = 'black';\r\n        obj.style = {\r\n            fill: obj.data.branch === 'Root' ? '#E74C3C' : '#F39C12', strokeColor: 'none',\r\n            strokeWidth: 2\r\n        };\r\n        obj.annotations = [{\r\n            content: obj.data.Label, margin: { left: 10, right: 10, top: 10, bottom: 10 },\r\n            style: { color: 'white' }\r\n        }];\r\n        var port1 = getPort();\r\n        for (var i = 0; i < port1.length; i++) {\r\n            obj.ports.push(new ej.diagrams.PointPort(obj, 'ports', port1[i], true));\r\n        }\r\n        hideUserHandle('Top');\r\n    }\r\n    else {\r\n        var color = void 0;\r\n        if (obj.data.branch === 'Right' || obj.data.branch === 'subRight') {\r\n            color = '#8E44AD';\r\n        }\r\n        else {\r\n            color = '#3498DB';\r\n        }\r\n        obj.shape = { type: 'Basic', shape: 'Rectangle' };\r\n        obj.style = { fill: color, strokeWidth: 0 };\r\n        obj.minWidth = 100;\r\n        obj.height = 4;\r\n        var port2 = getPort();\r\n        for (var j = 0; j < port2.length; j++) {\r\n            obj.ports.push(new ej.diagrams.PointPort(obj, 'ports', port2[j], true));\r\n        }\r\n        obj.annotations = [{\r\n            content: obj.data.Label, offset: { x: 0.5, y: 0 }, verticalAlignment: 'Bottom'\r\n        }];\r\n        obj.shape.margin = { left: 0, right: 0, top: 0, bottom: 0 };\r\n    }\r\n    return obj;\r\n}\r\n\r\nfunction getConnectorDefaults(connector, diagram) {\r\n    connector.type = 'Bezier';\r\n    connector.targetDecorator = { shape: 'None' };\r\n    var sourceNode = diagram.getObject(connector.sourceID);\r\n    var targetNode = diagram.getObject(connector.targetID);\r\n    if (targetNode.data.branch === 'Right' || targetNode.data.branch === 'subRight') {\r\n        connector.sourcePortID = sourceNode.ports[0].id;\r\n        connector.targetPortID = targetNode.ports[1].id;\r\n        connector.style = { strokeWidth: 2, strokeColor: '#8E44AD' };\r\n    }\r\n    else if (targetNode.data.branch === 'Left' || targetNode.data.branch === 'subLeft') {\r\n        connector.sourcePortID = sourceNode.ports[1].id;\r\n        connector.targetPortID = targetNode.ports[0].id;\r\n        connector.style = { strokeWidth: 2, strokeColor: '#3498DB' };\r\n    }\r\n    connector.constraints &= ~ej.diagrams.ConnectorConstraints.Select;\r\n    return connector;\r\n}\r\n\r\n//creation of the Ports\r\nfunction getPort() {\r\n    var port =\r\n        [{\r\n            id: 'port1', offset: { x: 0, y: 0.5 }, visibility: ej.diagrams.PortVisibility.Hidden,\r\n            style: { fill: 'black' }\r\n        },\r\n        {\r\n            id: 'port2', offset: { x: 1, y: 0.5 }, visibility: ej.diagrams.PortVisibility.Hidden,\r\n            style: { fill: 'black' }\r\n        },\r\n        ];\r\n    return port;\r\n}\r\n\r\nfunction addNode() {\r\n    var obj = {};\r\n    obj.id = ej.diagrams.randomId();\r\n    obj.data = {};\r\n    obj.data.Label = 'Node';\r\n    return obj;\r\n}\r\nfunction addConnector(source, target) {\r\n    var connector = {};\r\n    connector.id = ej.diagrams.randomId();\r\n    connector.sourceID = source.id;\r\n    connector.targetID = target.id;\r\n    return connector;\r\n}\r\n\r\n//Tool for Userhandles.\r\nfunction getTool(action) {\r\n    var tool;\r\n    if (action === 'leftHandle') {\r\n        tool = new LeftExtendTool(diagram.commandHandler);\r\n    } else if (action === 'rightHandle') {\r\n        tool = new RightExtendTool(diagram.commandHandler);\r\n    } else if (action === 'delete') {\r\n        tool = new DeleteClick(diagram.commandHandler);\r\n    }\r\n    return tool;\r\n}\r\n\r\nvar LeftExtendTool = (function (_super) {\r\n    __extends(LeftExtendTool, _super);\r\n    function LeftExtendTool() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    LeftExtendTool.prototype.mouseDown = function (args) {\r\n        _super.prototype.mouseDown.call(this, args);\r\n        this.inAction = true;\r\n    };\r\n    LeftExtendTool.prototype.mouseUp = function (args) {\r\n        if (this.inAction) {\r\n            var selectedElement = this.commandHandler.getSelectedObject();\r\n            if (selectedElement[0]) {\r\n                if (selectedElement[0] instanceof ej.diagrams.Node) {\r\n                    var node = addNode();\r\n                    if (selectedElement[0].data.branch === 'Root') {\r\n                        node.data.branch = 'Right';\r\n                    }\r\n                    else if (selectedElement[0].data.branch === 'Right' ||\r\n                        selectedElement[0].data.branch === 'subRight') {\r\n                        node.data.branch = 'subRight';\r\n                    }\r\n                    var connector = addConnector(selectedElement[0], node);\r\n                    diagram.clearSelection();\r\n                    var nd = diagram.add(node);\r\n                    diagram.add(connector);\r\n                    diagram.doLayout();\r\n                    diagram.bringIntoView(nd.wrapper.bounds);\r\n                    diagram.startTextEdit(nd);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return LeftExtendTool;\r\n}(ej.diagrams.ToolBase));\r\n\r\nvar RightExtendTool = (function (_super) {\r\n    __extends(RightExtendTool, _super);\r\n    function RightExtendTool() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    RightExtendTool.prototype.mouseDown = function (args) {\r\n        _super.prototype.mouseDown.call(this, args);\r\n        this.inAction = true;\r\n    };\r\n    RightExtendTool.prototype.mouseUp = function (args) {\r\n        if (this.inAction) {\r\n            var selectedObject = this.commandHandler.getSelectedObject();\r\n            if (selectedObject[0]) {\r\n                if (selectedObject[0] instanceof ej.diagrams.Node) {\r\n                    var node = addNode();\r\n                    if (selectedObject[0].data.branch === 'Root') {\r\n                        node.data.branch = 'Left';\r\n                    }\r\n                    else if (selectedObject[0].data.branch === 'Left' ||\r\n                        selectedObject[0].data.branch === 'subLeft') {\r\n                        node.data.branch = 'subLeft';\r\n                    }\r\n                    var connector = addConnector(selectedObject[0], node);\r\n                    diagram.clearSelection();\r\n                    var nd = diagram.add(node);\r\n                    diagram.add(connector);\r\n                    diagram.doLayout();\r\n                    diagram.bringIntoView(nd.wrapper.bounds);\r\n                    diagram.startTextEdit(nd);\r\n                }\r\n            }\r\n        }\r\n    };\r\n    return RightExtendTool;\r\n}(ej.diagrams.ToolBase));\r\n\r\nvar DeleteClick = (function (_super) {\r\n    __extends(DeleteClick, _super);\r\n    function DeleteClick() {\r\n        return _super !== null && _super.apply(this, arguments) || this;\r\n    }\r\n    DeleteClick.prototype.mouseDown = function (args) {\r\n        _super.prototype.mouseDown.call(this, args);\r\n        this.inAction = true;\r\n    };\r\n    DeleteClick.prototype.mouseUp = function (args) {\r\n        if (this.inAction) {\r\n            var selectedObject = this.commandHandler.getSelectedObject();\r\n            if (selectedObject[0]) {\r\n                if (selectedObject[0] instanceof ej.diagrams.Node) {\r\n                    var node = selectedObject[0];\r\n                    this.removeSubChild(node);\r\n                }\r\n                diagram.doLayout();\r\n            }\r\n        }\r\n    };\r\n    DeleteClick.prototype.removeSubChild = function (node) {\r\n        for (var i = node.outEdges.length - 1; i >= 0; i--) {\r\n            var connector = diagram.getObject(node.outEdges[i]);\r\n            var childNode = diagram.getObject(connector.targetID);\r\n            if (childNode.outEdges.length > 0) {\r\n                this.removeSubChild(childNode);\r\n            }\r\n            else {\r\n                diagram.remove(childNode);\r\n            }\r\n        }\r\n        diagram.remove(node);\r\n    };\r\n    return DeleteClick;\r\n}(ej.diagrams.ToolBase));\r\n\r\nfunction onchange(params) {\r\n    if (selectedObject[0].data.branch === 'Root' || selectedObject[0].data.branch === 'Left' || selectedObject[0].data.branch === 'Right') {\r\n        selectedObject[0].style.fill = args.target.value;\r\n        diagram.dataBind();\r\n    } else {\r\n        selectedObject[0].annotations[0].style.color = args.target.value;\r\n        diagram.dataBind();\r\n    }\r\n}\r\n//hide the require userhandle.\r\nfunction hideUserHandle(name) {\r\n    for (var _i = 0, _a = diagram.selectedItems.userHandles; _i < _a.length; _i++) {\r\n        var handle_2 = _a[_i];\r\n        if (handle_2.name === name) {\r\n            handle_2.visible = false;\r\n        }\r\n    }\r\n}\r\n\r\nvar leftarrow = 'M11.924,6.202 L4.633,6.202 L4.633,9.266 L0,4.633 L4.632,0 L4.632,3.551 L11.923,3.551 L11.923,6.202Z';\r\nvar rightarrow = 'M0,3.063 L7.292,3.063 L7.292,0 L11.924,4.633 L7.292,9.266 L7.292,5.714 L0.001,5.714 L0.001,3.063Z';\r\nvar deleteicon = 'M 7.04 22.13 L 92.95 22.13 L 92.95 88.8 C 92.95 91.92 91.55 94.58 88.76' +\r\n    '96.74 C 85.97 98.91 82.55 100 78.52 100 L 21.48 100 C 17.45 100 14.03 98.91 11.24 96.74 C 8.45 94.58 7.04' +\r\n    '91.92 7.04 88.8 z M 32.22 0 L 67.78 0 L 75.17 5.47 L 100 5.47 L 100 16.67 L 0 16.67 L 0 5.47 L 24.83 5.47 z';\r\nvar leftuserhandle = setUserHandle('leftHandle', leftarrow, 'Left', 1, { top: 0, bottom: 0, left: 0, right: 10 }, 'Left', 'Top');\r\nvar rightuserhandle = setUserHandle('rightHandle', rightarrow, 'Right', 1, { top: 0, bottom: 0, left: 10, right: 0 }, 'Right', 'Top');\r\nvar deleteuserhandle = setUserHandle('delete', deleteicon, 'Top', 0.5, { top: 0, bottom: 10, left: 0, right: 0 }, 'Center', 'Center');\r\nvar handle = [leftuserhandle, rightuserhandle, deleteuserhandle];\r\n//set and creation of the Userhandle.\r\nfunction setUserHandle(name, pathData, side, offset, margin, halignment, valignment) {\r\n    var userhandle = {\r\n        name: name,\r\n        pathData: pathData,\r\n        backgroundColor: 'black',\r\n        pathColor: 'white',\r\n        side: side,\r\n        offset: offset,\r\n        margin: margin,\r\n        horizontalAlignment: halignment,\r\n        verticalAlignment: valignment,\r\n    };\r\n    return userhandle;\r\n}\r\n//Change the Position of the UserHandle.\r\nfunction changeUserHandlePosition(change) {\r\n    for (var handle in diagram.selectedItems.userHandles) {\r\n        if (handle.name === 'delete' && change === 'leftHandle') {\r\n            applyHandle(handle, 'Left', 1, { top: 0, bottom: 0, left: 0, right: 10 }, 'Left', 'Top');\r\n\r\n        } else if (handle.name === 'delete' && change === 'rightHandle') {\r\n            applyHandle(handle, 'Right', 1, { top: 0, bottom: 0, left: 10, right: 0 }, 'Right', 'Top');\r\n        }\r\n    }\r\n}\r\n//set the value for UserHandle element\r\nfunction applyHandle(handle, side, offset, margin, halignment, valignment) {\r\n    handle.side = side;\r\n    handle.offset = offset;\r\n    handle.margin = margin;\r\n    handle.horizontalAlignment = halignment;\r\n    handle.verticalAlignment = valignment;\r\n}\r\n\r\n\r\n    var items = new ej.data.DataManager(window.data, new ej.data.Query().take(7));\r\n\r\n    //initialization of the Diagram.\r\n    diagram = new ej.diagrams.Diagram({\r\n        width: '100%', height: '550px',\r\n        snapSettings: { constraints: ej.diagrams.SnapConstraints.None },\r\n        tool: ej.diagrams.DiagramTools.SingleSelect,\r\n        layout: {\r\n            type: 'MindMap', horizontalSpacing: 50,\r\n            getBranch: function (node) {\r\n                return node.data.branch;\r\n            }\r\n        },\r\n        selectionChange: selectionChange,\r\n        selectedItems: { constraints: ej.diagrams.SelectorConstraints.UserHandle, userHandles: handle },\r\n        dataSourceSettings: { id: 'id', parentId: 'parentId', dataSource: items, root: String(1) },\r\n        //sets node default value\r\n        getNodeDefaults: getNodeDefaults,\r\n        //sets connector default value \r\n        getConnectorDefaults: getConnectorDefaults,\r\n        getCustomTool: getTool,\r\n    });\r\n    diagram.appendTo('#diagram');\r\n    diagram.fitToPage();\r\n\r\n"}