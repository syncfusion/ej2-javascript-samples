{"index.html":"<html><head><script src=\"//ej2.syncfusion.com/javascript/demos/diagram/port/datasource.js\" type=\"text/javascript\"></script>\n<script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\">\n<div class=\"col-lg-8 control-section\">\n        <style>\n                .sb-child-row {\n                    margin-top: 8px;\n                }\n            \n                .property-section .e-remove-selection {\n                    cursor: not-allowed;\n                }\n            \n                .row-header {\n                    font-size: 13px;\n                    font-weight: 500;\n                    padding-left: 10px\n                }\n            \n                .e-remove-selection .property-section-content {\n                    pointer-events: none;\n                }\n            </style>\n    <div id=\"diagram\"></div>\n</div>\n<div class=\"col-lg-4 property-section\">\n    <div class=\"property-panel-header\">\n        Properties\n    </div>\n    <div class=\"property-panel-content\">\n        <div id=\"propertypanel\" class=\"e-remove-selection\">\n            <div class=\"property-section-content\">\n                <div class=\"row sb-child-row\">\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Visibility\n                        </div>\n                        <div>\n                            <input type=\"text\" id=\"portsVisiblity\">\n                        </div>\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Shape\n                        </div>\n                        <div>\n                            <input type=\"text\" id=\"shape\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row sb-child-row\">\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Fill Color\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"fill\">\n                        </div>\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Stroke Color\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"border\">\n                        </div>\n                    </div>\n                </div>\n                <div class=\"row sb-child-row\">\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Stroke Width\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"width\">\n                        </div>\n                    </div>\n                    <div class=\"col-xs-6\">\n                        <div style=\"padding-bottom: 8px\">\n                            Size\n                        </div>\n                        <div style=\"padding-bottom: 8px\">\n                            <input type=\"text\" id=\"size\">\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n\n</div></body></html>","index.js":"{{ripple}}ej.diagrams.Diagram.Inject(ej.diagrams.UndoRedo);\nej.dropdowns.MultiSelect.Inject(ej.dropdowns.CheckBoxSelection);\n//get the port for the selected node.\nvar diagram;\nvar portVisibilityDrop;\nvar portFillDrop;\nvar portBorderDrop;\nvar portShapeDrop;\n\nvar portWidthNum;\nvar portSizeNum;\n\nfunction getPort() {\n    var node = diagram.selectedItems.nodes[0];\n    var port = [];\n    if (node) {\n        port = node.ports;\n    }\n    return port;\n}\n//enable or disable the property panel based on the Selection.\nfunction selectionChange(args) {\n    if (args.state === 'Changed') {\n        var appearance = document.getElementById('propertypanel');\n        var selectedElement = document.getElementsByClassName('e-remove-selection');\n        if (args.newValue) {\n\n            if (args.newValue[0] instanceof ej.diagrams.Node && selectedElement.length) {\n                selectedElement[0].classList.remove('e-remove-selection');\n                var port = getPort()[0];\n                portVisibilityDrop.value = [];\n                if (ej.diagrams.PortVisibility.Visible & port.visibility) {\n                    portVisibilityDrop.value.push(ej.diagrams.PortVisibility.Visible);\n                }\n                if (ej.diagrams.PortVisibility.Hidden & port.visibility) {\n                    portVisibilityDrop.value.push(ej.diagrams.PortVisibility.Hidden);\n                }\n                if (ej.diagrams.PortVisibility.Hover & port.visibility) {\n                    portVisibilityDrop.value.push(ej.diagrams.PortVisibility.Hover);\n                }\n                if (ej.diagrams.PortVisibility.Connect & port.visibility) {\n                    portVisibilityDrop.value.push(ej.diagrams.PortVisibility.Connect);\n                }\n                if (portVisibilityDrop.value.length === 0) {\n                    portVisibilityDrop.placeholder = 'Select Visibility';\n                }\n                portVisibilityDrop.dataBind();\n                portFillDrop.value = port.style.fill;\n                portFillDrop.dataBind();\n                portBorderDrop.value = port.style.strokeColor;\n                portBorderDrop.dataBind();\n                portShapeDrop.value = port.shape;\n                portShapeDrop.dataBind();\n                portSizeNum.value = port.height;\n                portSizeNum.dataBind();\n                portWidthNum.value = port.style.strokeWidth;\n                portWidthNum.dataBind();\n            }\n        }\n    }\n}\n//change the Visibility of the Port.\nfunction portVisibilityChange(args) {\n    var port = getPort();\n    if (port) {\n        for (var j = 0; j < port.length; j++) {\n            port[j].visibility = 0;\n            for (var i = 0; i < args.value.length; i++) {\n                port[j].visibility += args.value[i];\n            }\n        }\n    }\n    diagram.dataBind();\n}\n//set the appearence of the Port.\nfunction applyPortStyle(value) {\n    var port = getPort();\n    for (var j = 0; j < port.length; j++) {\n        if (value === 'size') {\n\n            port[j].height = portSizeNum.value;\n            port[j].width = portSizeNum.value;\n\n        } else if (value === 'strokewidth') {\n            port[j].style.strokeWidth = portWidthNum.value;\n        }\n    }\n    diagram.dataBind();\n}\n//change the shape of the Port.\nfunction portShapeChange(args) {\n    var port = getPort();\n    for (var j = 0; j < port.length; j++) {\n        switch (portShapeDrop.value) {\n            case 'X':\n                port[j].shape = 'X';\n                break;\n            case 'Circle':\n                port[j].shape = 'Circle';\n                break;\n            case 'Square':\n                port[j].shape = 'Square';\n                break;\n            case 'Custom':\n                port[j].shape = 'Custom';\n                port[j].pathData = 'M6.805,0L13.61,10.703L0,10.703z';\n                break;\n        }\n        diagram.dataBind();\n    }\n\n}\n\n\n    var bounds = document.getElementsByClassName('control-section')[0].getBoundingClientRect();\n    var centerX = bounds.width / 2;\n    var node1Port = [\n        {\n            id: 'port1', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port2', shape: 'Circle', offset: { x: 1, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 1'\n        },\n        {\n            id: 'port3', shape: 'Circle', offset: { x: 0.25, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 2'\n        },\n        {\n            id: 'port4', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 2'\n        },\n        {\n            id: 'port5', shape: 'Circle', offset: { x: 0.75, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 3'\n        }\n    ];\n    var node2Port = [\n        {\n            id: 'port6', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port7', shape: 'Circle', offset: { x: 1, y: 0.35 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 1'\n        },\n        {\n            id: 'port8', shape: 'Circle', offset: { x: 1, y: 0.70 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 2'\n        },\n        {\n            id: 'port9', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 2'\n        }\n    ];\n    var node3Port = [\n        {\n            id: 'port10', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'Out - 1'\n        },\n        {\n            id: 'port11', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port12', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 2'\n        }\n    ];\n    var node4Port = [\n        {\n            id: 'port13', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port14', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 2'\n        },\n        {\n            id: 'port15', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 1'\n        }\n    ];\n    var node5Port = [\n        {\n            id: 'port16', shape: 'Circle', offset: { x: 0, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'out - 1'\n        },\n        {\n            id: 'port17', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port18', shape: 'Circle', offset: { x: 1, y: 0.5 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'OUT - 2'\n        }\n    ];\n    var node6Port = [\n        {\n            id: 'port19', shape: 'Circle', offset: { x: 0, y: 0.35 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port20', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'Out - 1'\n        }\n    ];\n    var node7Port = [\n        {\n            id: 'port21', shape: 'Circle', offset: { x: 0.5, y: 0 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'In - 1'\n        },\n        {\n            id: 'port22', shape: 'Circle', offset: { x: 0.5, y: 1 }, height: 8, width: 8, visibility: ej.diagrams.PortVisibility.Visible,\n            text: 'Out - 1'\n        }\n    ];\n    var shape1 = { type: 'Basic', shape: 'Rectangle' };\n    var shape2 = { type: 'Basic', shape: 'Diamond' };\n    var nodes = [\n        {\n            id: 'node1', offsetX: centerX - 200, offsetY: 100,\n            annotations: [{ content: 'Publisher' }], ports: node1Port\n        },\n        {\n            id: 'node2', offsetX: centerX, offsetY: 100,\n            annotations: [{ content: 'Completed Book', margin: { left: 5, right: 5 } }], ports: node2Port\n        },\n        {\n            id: 'node3', offsetX: centerX, offsetY: 200,\n            annotations: [{ content: '1st Review' }], ports: node3Port\n        },\n        {\n            id: 'node4', offsetX: centerX, offsetY: 300,\n            annotations: [{ content: 'Legal Terms' }], ports: node4Port\n        },\n        {\n            id: 'node5', offsetX: centerX, offsetY: 400,\n            annotations: [{ content: '2nd Review' }], ports: node5Port\n        },\n        {\n            id: 'node6', offsetX: centerX + 200, offsetY: 100,\n            annotations: [{ content: 'Board' }], ports: node6Port\n        },\n        {\n            id: 'node7', offsetX: centerX + 200, offsetY: 200,\n            annotations: [{ content: 'Approval' }], ports: node7Port\n        }\n    ];\n    var connectors = [\n        {\n            id: 'connector1', sourceID: 'node1', sourcePortID: 'port2',\n            targetID: 'node2', targetPortID: 'port6'\n        },\n        {\n            id: 'connector2', sourceID: 'node1', sourcePortID: 'port4',\n            targetID: 'node4', targetPortID: 'port13'\n        },\n        {\n            id: 'connector3', sourceID: 'node2', sourcePortID: 'port9',\n            targetID: 'node3', targetPortID: 'port11'\n        },\n        {\n            id: 'connector4', sourceID: 'node2', sourcePortID: 'port7',\n            targetID: 'node6', targetPortID: 'port19'\n        },\n        {\n            id: 'connector5', sourceID: 'node3', sourcePortID: 'port10',\n            targetID: 'node1', targetPortID: 'port5'\n        },\n        {\n            id: 'connector6', sourceID: 'node3', sourcePortID: 'port12',\n            targetID: 'node4', targetPortID: 'port14'\n        },\n        {\n            id: 'connector7', sourceID: 'node4', sourcePortID: 'port15',\n            targetID: 'node5', targetPortID: 'port17'\n        },\n        {\n            id: 'connector8', sourceID: 'node5', sourcePortID: 'port18',\n            targetID: 'node2', targetPortID: 'port8'\n        },\n        {\n            id: 'connector9', sourceID: 'node5', sourcePortID: 'port16',\n            targetID: 'node1', targetPortID: 'port3'\n        },\n        {\n            id: 'connector10', sourceID: 'node6', sourcePortID: 'port20',\n            targetID: 'node7', targetPortID: 'port21'\n        },\n        {\n            id: 'connector11', sourceID: 'node7', sourcePortID: 'port22',\n            targetID: 'node1', targetPortID: 'port1'\n        }\n    ];\n    //Initialize diagram control\n    diagram = new ej.diagrams.Diagram({\n        width: '100%', height: 580,\n        nodes: nodes, connectors: connectors, selectionChange: selectionChange,\n        snapSettings: { constraints: 0 },\n        //Sets the default values of nodes\n        getNodeDefaults: function (obj) {\n            //Initialize shape\n            if (obj.id === 'node1' || obj.id === 'node2' || obj.id === 'node4' || obj.id === 'node6') {\n                obj.shape = shape1;\n            } else if (obj.id === 'node3' || obj.id === 'node5' || obj.id === 'node7') {\n                obj.shape = shape2;\n            }\n            //sets height and width for nodes\n            obj.height = 65;\n            obj.width = 100;\n            obj.style = { fill: '#ebf8fb', strokeColor: '#baeaf5' };\n            for (var i = 0; i < obj.ports.length; i++) {\n                //sets styles for the ports\n                obj.ports[i].style = {\n                    fill: '#366f8c',\n                    strokeColor: '#366f8c'\n                };\n                obj.ports[i].width = 6;\n                obj.ports[i].height = 6;\n            }\n            obj.annotations[0].style = {\n                fontSize: 13,\n                color: 'black'\n            };\n        },\n        //Sets the default values of connector\n        getConnectorDefaults: function (connector) {\n            //defines type of the connectors\n            connector.type = 'Orthogonal';\n            connector.style = { strokeColor: '#8cdcef', strokeWidth: 1 };\n            connector.targetDecorator = { width: 5, height: 5, style: { fill: '#8cdcef', strokeColor: '#8cdcef' } };\n        },\n    });\n    diagram.appendTo('#diagram');\n    //Visibility collection of the Port.\n    var visibility = [\n        { PortVisibility: ej.diagrams.PortVisibility.Visible, text: 'Visible' },\n        { PortVisibility: ej.diagrams.PortVisibility.Hidden, text: 'Hidden' },\n        { PortVisibility: ej.diagrams.PortVisibility.Hover, text: 'Hover' },\n        { PortVisibility: ej.diagrams.PortVisibility.Connect, text: 'Connect' }\n    ];\n    //Enable or disable the visibility of the Port\n    portVisibilityDrop = new ej.dropdowns.MultiSelect({\n        enabled: true, dataSource: visibility,\n        fields: { value: 'PortVisibility', text: 'text' },\n        mode: 'CheckBox',\n        showSelectAll: true,\n        showdropdownsIcon: true,\n        popupHeight: '280px',\n        popupWidth: '180px',\n        change: portVisibilityChange\n    });\n    portVisibilityDrop.appendTo('#portsVisiblity');\n    //Colorpicker used to apply for fill color of the Port.\n    portFillDrop = new ej.inputs.ColorPicker({\n        value: '#000', disabled: false, change: function (arg) {\n            var port = getPort();\n            for (var j = 0; j < port.length; j++) {\n                port[j].style.fill = arg.currentValue.rgba;\n            }\n        }\n    });\n    portFillDrop.appendTo('#fill');\n    //Colorpicker used to apply for stroke color of the Port.\n    portBorderDrop = new ej.inputs.ColorPicker({\n        value: '#000', disabled: false, change: function (arg) {\n            var port = getPort();\n            for (var j = 0; j < port.length; j++) {\n                port[j].style.strokeColor = arg.currentValue.rgba;\n            }\n        }\n    });\n    portBorderDrop.appendTo('#border');\n    //Shape collection of the Port.\n    var shape = [\n        { shape: 'X', text: 'X' },\n        { shape: 'Circle', text: 'Circle' },\n        { shape: 'Square', text: 'Square' },\n        { shape: 'Custom', text: 'Custom' }\n    ];\n    //DropDownList is used to apply the shape of the Port.\n    portShapeDrop = new ej.dropdowns.DropDownList({\n        enabled: true, placeholder: 'Select a Port', value: 'Circle',\n        dataSource: shape, fields: { value: 'shape', text: 'text' },\n        change: portShapeChange\n    });\n    //NumericTextBox is used to apply the size of the Port.\n    portShapeDrop.appendTo('#shape');\n    portSizeNum = new ej.inputs.NumericTextBox({\n        enabled: true,\n        format: '###.##',\n        value: 6,\n        min: 1,\n        step: 1,\n        change: function (args) {\n            applyPortStyle('size');\n        }\n    });\n    portSizeNum.appendTo('#size');\n    //NumericTextBox is used to apply the StrokeWidth of the Port.\n    portWidthNum = new ej.inputs.NumericTextBox({\n        enabled: true,\n        format: '###.##',\n        value: 1,\n        min: 0.5,\n        step: 0.5,\n        change: function (args) {\n            applyPortStyle('strokewidth');\n        }\n    });\n    portWidthNum.appendTo('#width');\n    diagram.select([diagram.nodes[0]]);\n"}