{"index.html":"<html><head><script src=\"//ej2.syncfusion.com/javascript/demos/schedule/external-drag-drop/datasource.js\" type=\"text/javascript\"></script>\n<script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section\">\n    <div class=\"content-wrapper\">\n        <div class=\"schedule-container\">\n            <div class=\"title-container\">\n                <h1 class=\"title-text\">Doctor&apos;s Appointments</h1>\n            </div>\n            <div id=\"Schedule\">\n            </div>\n        </div>\n        <div class=\"treeview-container\">\n            <div class=\"title-container\">\n                <h1 class=\"title-text\">Waiting List</h1>\n            </div>\n            <div id=\"Tree\"></div>\n        </div>\n    </div>\n</div>\n\n\n\n\n\n<!-- Template to render tree node -->\n<script id=\"treeTemplate\" type=\"text/x-template\">\n    <div id=\"waiting\">\n        <div id=\"waitdetails\">\n            <div id=\"waitlist\">${Name}</div>\n            <div id=\"waitcategory\">${DepartmentName} - ${Description}</div>\n        </div>\n    </div>\n</script>\n\n<!-- Resource Header Template -->\n<script id=\"resource-template\" type=\"text/x-template\">\n    <div class=\"template-wrap\">\n        <div class=\"specialist-category\"> \n            ${getConsultantImage(data)}\n            <div class=\"specialist-name\">${getConsultantName(data)}</div>\n            <div class=\"specialist-designation\">${getConsultantDesignation(data)}</div>\n        </div>\n    </div>\n</script>\n\n<style>\n\n\n    .treeview-external-drag #waiting {\n        height: 100%;\n        padding: 0;\n    }\n\n    .treeview-external-drag #waitid {\n        float: left;\n        width: 13%;\n        text-align: center;\n        line-height: 30px;\n        font-size: 13px;\n        font-family: \"Segoe UI\";\n        color: #f9920b;\n        overflow: hidden;\n        margin: 9px 0;\n        padding: 0 2px 0 0;\n    }\n\n    .treeview-external-drag #waitdetails {\n        width: 95%;\n        float: left;\n        height: 100%;\n        padding: 0;\n    }\n\n    .treeview-external-drag #waitlist {\n        width: 100%;\n        height: 50%;\n        font-weight: bold;\n        font-family: \"Segoe UI\";\n        font-size: 12px;\n        color: #545554;\n        padding: 5px 0 0 10px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    .treeview-external-drag #waitcategory {\n        height: 50%;\n        font-family: \"Segoe UI\";\n        font-size: 10px;\n        color: #545554;\n        opacity: 0.6;\n        padding-left: 10px;\n        padding-top: 5px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n    }\n\n    .treeview-external-drag .e-list-text,\n    .e-bigger .treeview-external-drag .e-list-text {\n        background: white;\n        border: 0.5px solid #E1E7EC;\n        height: 50px;\n        line-height: 15px;\n        padding: 0 5px;\n        width: 220px;\n    }\n\n    .treeview-external-drag .e-list-parent,\n    .e-bigger .treeview-external-drag .e-list-parent {\n        height: 100%;\n        padding: 0 2px;\n    }\n\n    .treeview-external-drag .e-list-item,\n    .e-bigger .treeview-external-drag .e-list-item {\n        height: 100%;\n        padding: 0 0 5px 0;\n    }\n\n    .treeview-external-drag .e-fullrow,\n    .e-bigger .treeview-external-drag .e-fullrow {\n        height: 55px;\n    }\n\n    .treeview-external-drag .e-list-item.e-hover>.e-fullrow,\n    .treeview-external-drag .e-list-item.e-active>.e-fullrow,\n    .treeview-external-drag .e-list-item.e-active.e-hover>.e-fullrow,\n    .e-bigger .treeview-external-drag .e-list-item.e-hover>.e-fullrow,\n    .e-bigger .treeview-external-drag .e-list-item.e-active>.e-fullrow,\n    .e-bigger .treeview-external-drag .e-list-item.e-active.e-hover>.e-fullrow {\n        background-color: transparent;\n        border-color: transparent;\n        box-shadow: none !important;\n    }\n\n    .treeview-external-drag .e-text-content,\n    .e-bigger .treeview-external-drag .e-text-content {\n        padding: 0;\n    }\n\n    .e-drag-item.e-treeview.treeview-external-drag,\n    .e-bigger .e-drag-item.e-treeview.treeview-external-drag {\n        padding: 0 !important;\n    }\n\n    .e-schedule.schedule-drag-drop .e-timeline-view .e-resource-left-td,\n    .e-schedule.schedule-drag-drop .e-timeline-month-view .e-resource-left-td {\n        width: 160px;\n    }\n\n    .e-schedule.schedule-drag-drop .e-resource-cells.e-parent-node .specialist-category {\n        padding-left: 30px\n    }\n\n    .e-schedule.e-rtl.schedule-drag-drop .e-resource-cells.e-parent-node .specialist-category {\n        padding-right: 30px\n    }\n\n    .e-schedule.schedule-drag-drop .e-resource-cells.e-child-node .specialist-category,\n    .e-schedule.schedule-drag-drop .e-resource-cells.e-child-node .specialist-name {\n        padding: 5px\n    }\n\n    .e-schedule.schedule-drag-drop .e-resource-cells.e-parent-node .specialist-name {\n        padding: 0 10px\n    }\n\n    .e-schedule.schedule-drag-drop .specialist-name {\n        font-size: 13px;\n    }\n    .e-schedule.schedule-drag-drop .specialist-designation {\n        font-size: 10px;\n    }\n\n\n    .e-schedule.schedule-drag-drop .specialist-img {\n        width: 45px;\n        height: 40px;\n        float: left;\n        border-radius: 50%;\n        margin-right: 10px;\n    }\n\n    .e-schedule-dialog .e-all-day-time-zone-row,\n    .e-schedule-dialog .e-location-container,\n    .e-bigger .e-schedule-dialog .e-all-day-time-zone-row,\n    .e-bigger .e-schedule-dialog .e-location-container {\n        display: none;\n    }\n\n    .e-schedule-dialog .e-subject-container,\n    .e-bigger .e-schedule-dialog .e-subject-container {\n        padding-right: 0;\n        width: 100%;\n    }\n\n    .e-schedule-dialog.e-rtl .e-subject-container,\n    .e-bigger .e-schedule-dialog.e-rtl .e-subject-container {\n        padding-left: 0;\n    }\n\n    .e-device-hover {\n        background-color: #e0e0e0!important;\n    }\n\n\n    @media (max-width: 550px) {\n\n        .treeview-external-drag.e-treeview,\n        .e-bigger .treeview-external-drag.e-treeview {\n            width: 225px;\n        }\n\n        .e-bigger .treeview-external-drag.e-treeview.e-drag-item {\n            position: relative !important;\n        }\n    }\n</style></div></body></html>","index.js":"{{ripple}}\n    window.getConsultantName = function (value) {\n        return value.resourceData[value.resource.textField];\n    };\n\n    window.getConsultantImage = function (value) {\n        var resourceName = value.resourceData[value.resource.textField];\n        if (resourceName === \"GENERAL\" || resourceName === \"DENTAL\") {\n            return '';\n        } else {\n            return \"<img class='specialist-img' src='src/schedule/images/\" + resourceName.toLowerCase() + \".png' />\";\n        }\n    };\n\n    window.getConsultantDesignation = function (value) {\n        var resourceName = value.resourceData[value.resource.textField];\n        if (resourceName === \"GENERAL\" || resourceName === \"DENTAL\") {\n            return '';\n        } else {\n            return value.resourceData.Designation;\n        }\n    };\n\n    var hospitalData = new ej.base.extend([], window.hospitalData, null, true);\n    var scheduleObj = new ej.schedule.Schedule({\n        width: '100%',\n        height: '650px',\n        selectedDate: new Date(2018, 7, 1),\n        currentView: 'TimelineDay',\n        resourceHeaderTemplate: '#resource-template',\n        cssClass: 'schedule-drag-drop',\n        workHours: {\n            start: '08:00',\n            end: '18:00'\n        },\n        views: [\n            { option: 'TimelineDay' },\n            { option: 'TimelineMonth' }\n        ],\n        group: {\n            enableCompactView: false,\n            resources: ['Departments', 'Consultants']\n        },\n        resources: [\n            {\n                field: 'DepartmentID', title: 'Department',\n                name: 'Departments', allowMultiple: false,\n                dataSource: [\n                    { Text: 'GENERAL', Id: 1, Color: '#bbdc00' },\n                    { Text: 'DENTAL', Id: 2, Color: '#9e5fff' }\n                ],\n                textField: 'Text', idField: 'Id', colorField: 'Color'\n            },\n            {\n                field: 'ConsultantID', title: 'Consultant',\n                name: 'Consultants', allowMultiple: false,\n                dataSource: [\n                    { Text: 'Alice', Id: 1, GroupId: 1, Color: '#bbdc00', Designation: 'Cardiologist' },\n                    { Text: 'Nancy', Id: 2, GroupId: 2, Color: '#9e5fff', Designation: 'Orthodontist' },\n                    { Text: 'Robert', Id: 3, GroupId: 1, Color: '#bbdc00', Designation: 'Optometrist' },\n                    { Text: 'Robson', Id: 4, GroupId: 2, Color: '#9e5fff', Designation: 'Periodontist' },\n                    { Text: 'Laura', Id: 5, GroupId: 1, Color: '#bbdc00', Designation: 'Orthopedic' },\n                    { Text: 'Margaret', Id: 6, GroupId: 2, Color: '#9e5fff', Designation: 'Endodontist' }\n                ],\n                textField: 'Text', idField: 'Id', groupIDField: 'GroupId', colorField: 'Color'\n            }\n        ],\n        eventSettings: {\n            dataSource: hospitalData,\n            fields: {\n                subject: { title: 'Patient Name', name: 'Name' },\n                startTime: { title: \"From\", name: \"StartTime\" },\n                endTime: { title: \"To\", name: \"EndTime\" },\n                description: { title: 'Reason', name: 'Description' }\n            }\n        },\n        actionBegin: onActionBegin,\n        drag: onItemDrag\n    });\n    scheduleObj.appendTo('#Schedule');\n\n    var waitingList = new ej.base.extend([], window.waitingList, null, true);\n    var treeObj = new ej.navigations.TreeView({\n        fields: { dataSource: waitingList, id: 'Id', text: 'Name' },\n        allowDragAndDrop: true,\n        nodeDragStop: onTreeDragStop,\n        nodeDragging: onItemDrag,\n        nodeTemplate: '#treeTemplate',\n        cssClass: 'treeview-external-drag'\n    });\n    treeObj.appendTo('#Tree');\n\n    var isTreeItemDropped = false;\n    var draggedItemId = '';\n\n    function onItemDrag(event) {\n        if (scheduleObj.isAdaptive) {\n            var classElement = scheduleObj.element.querySelector('.e-device-hover');\n            if (classElement) {\n                classElement.classList.remove('e-device-hover');\n            }\n            if (event.target.classList.contains('e-work-cells')) {\n                ej.base.addClass([event.target], 'e-device-hover');\n            }\n        }\n        if (document.body.style.cursor === 'not-allowed') {\n            document.body.style.cursor = '';\n        }\n        if (event.name == 'nodeDragging') {\n            var dragElementIcon = document.querySelectorAll('.e-drag-item .e-icon-expandable');\n            for (var i = 0; i < dragElementIcon.length; i++) {\n                dragElementIcon[i].style.display = 'none';\n            }\n        }\n    }\n\n    function onActionBegin(event) {\n        if (event.requestType === 'eventCreate' && isTreeItemDropped) {\n            var treeViewdata = treeObj.fields.dataSource;\n            var filteredPeople = treeViewdata.filter(function (item) { return item.Id !== parseInt(draggedItemId, 10); });\n            treeObj.fields.dataSource = filteredPeople;\n            var elements = document.querySelectorAll('.e-drag-item.treeview-external-drag');\n            for (var i = 0; i < elements.length; i++) {\n                remove(elements[i]);\n            }\n        }\n    }\n\n    function onTreeDragStop(event) {\n        var treeElement = ej.base.closest(event.target, '.e-treeview');\n        var classElement = scheduleObj.element.querySelector('.e-device-hover');\n        if (classElement) {\n            classElement.classList.remove('e-device-hover');\n        }\n        if (!treeElement) {\n            event.cancel = true;\n            var scheduleElement = ej.base.closest(event.target, '.e-content-wrap');\n            if (scheduleElement) {\n                var treeviewData = treeObj.fields.dataSource;\n                if (event.target.classList.contains('e-work-cells')) {\n                    var filteredData =\n                        treeviewData.filter(function (item) { return item.Id === parseInt(event.draggedNodeData.id, 10); });\n                    var cellData = scheduleObj.getCellDetails(event.target);\n                    var resourceDetails = scheduleObj.getResourcesByIndex(cellData.groupIndex);\n                    var eventData = {\n                        Name: filteredData[0].Name,\n                        StartTime: cellData.startTime,\n                        EndTime: cellData.endTime,\n                        IsAllDay: cellData.isAllDay,\n                        Description: filteredData[0].Description,\n                        DepartmentID: resourceDetails.resourceData.GroupId,\n                        ConsultantID: resourceDetails.resourceData.Id\n                    };\n                    scheduleObj.openEditor(eventData, 'Add', true);\n                    isTreeItemDropped = true;\n                    draggedItemId = event.draggedNodeData.id;\n                }\n            }\n        }\n    }\n\n"}