{"index.html":"<html><head><script src=\"//ej2.syncfusion.com/javascript/demos/schedule/context-menu/datasource.js\" type=\"text/javascript\"></script>\n<script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section\">\n    <div class=\"content-wrapper\">\n        <div id=\"Schedule\">\n        </div>\n        <ul id=\"ContextMenu\"></ul>\n    </div>\n</div>\n\n<style>\n    .schedule-context-menu .e-menu-item .new::before {\n        content: '\\e7f9';\n    }\n\n    .schedule-context-menu .e-menu-item .edit::before {\n        content: '\\ea9a';\n    }\n\n    .schedule-context-menu .e-menu-item .recurrence::before {\n        content: '\\e308';\n        font-weight: bold;\n    }\n\n    .schedule-context-menu .e-menu-item .today::before {\n        content: '\\e322';\n    }\n\n    .schedule-context-menu .e-menu-item .delete::before {\n        content: '\\e94a';\n    }\n    \n    .e-bigger .schedule-context-menu ul .e-menu-item .e-menu-icon {\n        font-size: 14px;\n    }\n\n    .schedule-context-menu ul .e-menu-item .e-menu-icon {\n        font-size: 12px;\n    }\n\n</style>\n\n\n</div></body></html>","index.js":"{{ripple}}\r\n    var data = new ej.base.extend([], window.scheduleData, null, true);\r\n    var scheduleObj = new ej.schedule.Schedule({\r\n        width: '100%',\r\n        height: '650px',\r\n        selectedDate: new Date(2019, 0, 10),\r\n        eventSettings: {\r\n            dataSource: data\r\n        },\r\n        allowDragAndDrop: false,\r\n        allowResizing: false,\r\n    });\r\n    scheduleObj.appendTo('#Schedule');\r\n\r\n    var menuObj, selectedTarget;\r\n\r\n    var menuItems = [{\r\n        text: 'New Event',\r\n        iconCss: 'e-icons new',\r\n        id: 'Add'\r\n    }, {\r\n        text: 'New Recurring Event',\r\n        iconCss: 'e-icons recurrence',\r\n        id: 'AddRecurrence'\r\n    }, {\r\n        text: 'Today',\r\n        iconCss: 'e-icons today',\r\n        id: 'Today'\r\n    }, {\r\n        text: 'Edit Event',\r\n        iconCss: 'e-icons edit',\r\n        id: 'Save'\r\n    }, {\r\n        text: 'Edit Event',\r\n        id: 'EditRecurrenceEvent',\r\n        iconCss: 'e-icons edit',\r\n        items: [{\r\n            text: 'Edit Occurrence',\r\n            id: 'EditOccurrence'\r\n        }, {\r\n            text: 'Edit Series',\r\n            id: 'EditSeries'\r\n        }]\r\n    }, {\r\n        text: 'Delete Event',\r\n        iconCss: 'e-icons delete',\r\n        id: 'Delete'\r\n    }, {\r\n        text: 'Delete Event',\r\n        id: 'DeleteRecurrenceEvent',\r\n        iconCss: 'e-icons delete',\r\n        items: [{\r\n            text: 'Delete Occurrence',\r\n            id: 'DeleteOccurrence'\r\n        }, {\r\n            text: 'Delete Series',\r\n            id: 'DeleteSeries'\r\n        }]\r\n    }];\r\n    menuObj = new ej.navigations.ContextMenu({\r\n        target: '.e-schedule',\r\n        items: menuItems,\r\n        beforeOpen: onContextMenuBeforeOpen,\r\n        select: onMenuItemSelect,\r\n        cssClass: 'schedule-context-menu'\r\n    });\r\n    menuObj.appendTo('#ContextMenu');\r\n\r\n    function onContextMenuBeforeOpen(args) {\r\n        var newEventElement = document.querySelector('.e-new-event');\r\n        if (newEventElement) {\r\n            ej.base.remove(newEventElement);\r\n            ej.base.removeClass([document.querySelector('.e-selected-cell')], 'e-selected-cell');\r\n        }\r\n        var targetElement = args.event.target;\r\n        if (ej.base.closest(targetElement, '.e-contextmenu')) {\r\n            return;\r\n        }\r\n        selectedTarget = ej.base.closest(targetElement, '.e-appointment,.e-work-cells,' +\r\n            '.e-vertical-view .e-date-header-wrap .e-all-day-cells,.e-vertical-view .e-date-header-wrap .e-header-cells');\r\n        if (ej.base.isNullOrUndefined(selectedTarget)) {\r\n            args.cancel = true;\r\n            return;\r\n        }\r\n        if (selectedTarget.classList.contains('e-appointment')) {\r\n            var eventObj = scheduleObj.getEventDetails(selectedTarget);\r\n            if (eventObj.RecurrenceRule) {\r\n                menuObj.showItems(['EditRecurrenceEvent', 'DeleteRecurrenceEvent'], true);\r\n                menuObj.hideItems(['Add', 'AddRecurrence', 'Today', 'Save', 'Delete'], true);\r\n            } else {\r\n                menuObj.showItems(['Save', 'Delete'], true);\r\n                menuObj.hideItems(['Add', 'AddRecurrence', 'Today', 'EditRecurrenceEvent', 'DeleteRecurrenceEvent'], true);\r\n            }\r\n            return;\r\n        }\r\n        menuObj.hideItems(['Save', 'Delete', 'EditRecurrenceEvent', 'DeleteRecurrenceEvent'], true);\r\n        menuObj.showItems(['Add', 'AddRecurrence', 'Today'], true);\r\n    }\r\n\r\n    function onMenuItemSelect(args) {\r\n        var selectedMenuItem = args.item.id;\r\n        var eventObj;\r\n        if (selectedTarget.classList.contains('e-appointment')) {\r\n            eventObj = scheduleObj.getEventDetails(selectedTarget);\r\n        }\r\n        switch (selectedMenuItem) {\r\n            case 'Today':\r\n                scheduleObj.selectedDate = new Date();\r\n                break;\r\n            case 'Add':\r\n            case 'AddRecurrence':\r\n                var selectedCells = scheduleObj.getSelectedElements();\r\n                var activeCellsData = scheduleObj.getCellDetails(selectedCells.length > 0 ? selectedCells : selectedTarget);\r\n                if (selectedMenuItem === 'Add') {\r\n                    scheduleObj.openEditor(activeCellsData, 'Add');\r\n                } else {\r\n                    scheduleObj.openEditor(activeCellsData, 'Add', null, 1);\r\n                }\r\n                break;\r\n            case 'Save':\r\n            case 'EditOccurrence':\r\n            case 'EditSeries':\r\n                if (selectedMenuItem === 'EditSeries') {\r\n                    eventObj = new ej.data.DataManager(scheduleObj.eventsData).executeLocal(new ej.data.Query().where(scheduleObj.eventFields.id, 'equal', eventObj[scheduleObj.eventFields.recurrenceID]))[0];\r\n                }\r\n                scheduleObj.openEditor(eventObj, selectedMenuItem);\r\n                break;\r\n            case 'Delete':\r\n                scheduleObj.deleteEvent(eventObj);\r\n                break;\r\n            case 'DeleteOccurrence':\r\n            case 'DeleteSeries':\r\n                scheduleObj.deleteEvent(eventObj, selectedMenuItem);\r\n                break;\r\n        }\r\n    }\r\n"}