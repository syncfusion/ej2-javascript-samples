{"index.html":"<html><head><script src=\"//npmci.syncfusion.com/development/demos/schedule/search-events/datasource.js\" type=\"text/javascript\"></script>\n<script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"col-lg-9 control-section\">\n    <div class=\"content-wrapper\">\n        <div class=\"col-md-12\">\n            <div id=\"schedule\"></div>\n            <div id=\"grid\"></div>\n        </div>\n    </div>\n</div>\n<div class=\"col-lg-3 property-section property-customization\">\n    <div class=\"property-panel-section\">\n        <p class=\"property-panel-header header-customization\" style=\"width: 100%\">Search by all event fields</p>\n        <div class=\"property-panel-content\">\n            <input type=\"text\" class=\"e-input\" id=\"events-search\">\n        </div>\n        <form class=\"event-search\" id=\"form-search\">\n            <p class=\"property-panel-header  header-customization\" style=\"width: 100%\">Search by specific event fields</p>\n            <table id=\"property-specific\" style=\"width: 100%\">\n                <tbody>\n                    <tr class=\"row\">\n                        <td class=\"property-panel-content\" colspan=\"2\">\n                            <input type=\"text\" class=\"search-field\" id=\"searchEventName\" name=\"Subject\">\n                        </td>\n                    </tr>\n                    <tr class=\"row\" style=\"height: 45px\">\n                        <td class=\"property-panel-content\" colspan=\"2\">\n                            <input type=\"text\" class=\"search-field\" id=\"searchEventLocation\" name=\"Location\">\n                        </td>\n                    </tr>\n                    <tr class=\"row\" style=\"height: 45px\">\n                        <td class=\"property-panel-content\" colspan=\"2\">\n                            <input type=\"text\" class=\"search-field e-start-time\" id=\"startScheduleDate\" name=\"StartTime\">\n                        </td>\n                    </tr>\n                    <tr class=\"row\" style=\"height: 45px\">\n                        <td class=\"property-panel-content\" colspan=\"2\">\n                            <input type=\"text\" class=\"search-field e-end-time\" id=\"endScheduleDate\" name=\"EndTime\">\n                        </td>\n                    </tr>\n                    <tr class=\"row\" style=\"height: 45px\">\n                        <td class=\"e-field button-customization\" style=\"width: 50%; padding: 15px\">\n                            <input id=\"seperateSearch\" type=\"button\" value=\"Search\">\n                        </td>\n                        <td class=\"e-field button-customization\" style=\"width: 50%; padding: 15px\">\n                            <input id=\"clear\" type=\"button\" value=\"Clear\">\n                        </td>\n                    </tr>\n                </tbody>\n            </table>\n        </form>\n    </div>\n</div>\n\n\n\n\n\n","index.js":"{{ripple}}\r\n    var data = new ej.base.extend([], window.scheduleData, null, true);\r\n    var scheduleObj = new ej.schedule.Schedule({\r\n        width: '100%',\r\n        height: '550px',\r\n        selectedDate: new Date(2019, 0, 10),\r\n        eventSettings: { dataSource: data }\r\n    });\r\n    scheduleObj.appendTo('#schedule');\r\n\r\n    ej.inputs.Input.createInput({\r\n        element: document.getElementById('events-search'),\r\n        properties: { placeholder: 'Enter the Search text' }\r\n    });\r\n\r\n    ej.inputs.Input.createInput({\r\n        element: document.getElementById('searchEventName'),\r\n        properties: { placeholder: 'Subject' }\r\n    });\r\n\r\n    ej.inputs.Input.createInput({\r\n        element: document.getElementById('searchEventLocation'),\r\n        properties: { placeholder: 'Location' }\r\n    });\r\n\r\n    var startScheduleDate = new ej.calendars.DatePicker({ value: null, showClearButton: false, placeholder: 'Start Date' });\r\n    startScheduleDate.appendTo('#startScheduleDate');\r\n\r\n    var endScheduleDate = new ej.calendars.DatePicker({ value: null, showClearButton: false, placeholder: 'End Date' });\r\n    endScheduleDate.appendTo('#endScheduleDate');\r\n\r\n    var searchButton = new ej.buttons.Button();\r\n    searchButton.appendTo('#seperateSearch');\r\n    document.getElementById('seperateSearch').onclick = function () {\r\n        var searchObj = [];\r\n        var startDate;\r\n        var endDate;\r\n        var formElements = [].slice.call(document.querySelectorAll('.event-search .search-field'));\r\n        formElements.forEach(function (node) {\r\n            if (node.value && node.value !== '') {\r\n                var fieldOperator = 'contains';\r\n                var predicateCondition = 'or';\r\n                var fieldValue = node.value;\r\n                var matchCase = true;\r\n                if (node.classList.contains('e-datepicker')) {\r\n                    fieldOperator = node.classList.contains('e-start-time') ? 'greaterthanorequal' : 'lessthanorequal';\r\n                    predicateCondition = 'and';\r\n                    var fieldInstance = ((node)).ej2_instances[0];\r\n                    fieldValue = fieldInstance.value;\r\n                    if (node.classList.contains('e-start-time')) {\r\n                        startDate = new Date(+fieldValue);\r\n                    }\r\n                    if (node.classList.contains('e-end-time')) {\r\n                        var date = new Date(+fieldInstance.value);\r\n                        fieldValue = new Date(date.setDate(date.getDate() + 1));\r\n                        endDate = fieldValue;\r\n                    }\r\n                    matchCase = false;\r\n                }\r\n                searchObj.push({\r\n                    field: node.name, operator: fieldOperator, value: fieldValue, predicate: predicateCondition,\r\n                    matchcase: matchCase\r\n                });\r\n            }\r\n        });\r\n        if (searchObj.length > 0) {\r\n            var filterCondition = searchObj[0];\r\n            var predicate = new ej.data.Predicate(\r\n                filterCondition.field, filterCondition.operator, filterCondition.value, filterCondition.matchcase);\r\n            for (var i = 1; i < searchObj.length; i++) {\r\n                predicate = predicate.and(searchObj[i].field, searchObj[i].operator, searchObj[i].value, searchObj[i].matchcase);\r\n            }\r\n            var result = new ej.data.DataManager(scheduleObj.getEvents(startDate, endDate, true)).\r\n                executeLocal(new ej.data.Query().where(predicate));\r\n            showSearchEvents('show', result);\r\n        } else {\r\n            showSearchEvents('hide');\r\n        }\r\n    };\r\n\r\n    var clearButton = new ej.buttons.Button();\r\n    clearButton.appendTo('#clear');\r\n    document.getElementById('clear').onclick = function () {\r\n        document.getElementById('schedule').style.display = 'block';\r\n        document.getElementById('form-search').reset();\r\n        showSearchEvents('hide');\r\n    };\r\n\r\n    document.getElementById('events-search').onkeyup = function (args) {\r\n        var searchString = (args.target).value;\r\n        if (searchString !== '') {\r\n            new ej.data.DataManager(scheduleObj.getEvents(null, null, true)).executeQuery(new ej.data.Query().\r\n                search(searchString, ['Subject', 'Location', 'Description'], null, true, true)).then(function (e) {\r\n                    if ((e.result).length > 0) {\r\n                        showSearchEvents('show', e.result);\r\n                    } else {\r\n                        showSearchEvents('hide');\r\n                    }\r\n                });\r\n        } else {\r\n            showSearchEvents('hide');\r\n        }\r\n    };\r\n\r\n    function showSearchEvents(type, data) {\r\n        if (type === 'show') {\r\n            if (document.getElementById('grid').classList.contains('e-grid')) {\r\n                var gridObj = document.querySelector('#grid').ej2_instances[0];\r\n                gridObj.dataSource = data;\r\n                gridObj.dataBind();\r\n            } else {\r\n                var grid = new ej.grids.Grid({\r\n                    dataSource: data,\r\n                    height: 505,\r\n                    width: 'auto',\r\n                    columns: [\r\n                        { field: 'Subject', headerText: 'Subject', width: 120 },\r\n                        { field: 'Location', headerText: 'Location', width: 120 },\r\n                        { field: 'StartTime', headerText: 'StartTime', width: 120, format: { type: 'dateTime', format: 'M/d/y hh:mm a' } },\r\n                        { field: 'EndTime', headerText: 'EndTime', width: 120, format: { type: 'dateTime', format: 'M/d/y hh:mm a' } },\r\n                    ]\r\n                });\r\n                grid.appendTo(document.querySelector('#grid'));\r\n                scheduleObj.element.style.display = 'none';\r\n            }\r\n        } else {\r\n            var resultGridObj = (document.querySelector('#grid')).ej2_instances;\r\n            if (resultGridObj && resultGridObj.length > 0 && !resultGridObj[0].isDestroyed) {\r\n                resultGridObj[0].destroy();\r\n            }\r\n            scheduleObj.element.style.display = 'block';\r\n        }\r\n    }\r\n"}