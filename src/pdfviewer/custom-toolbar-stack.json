{"index.html":"<html><head><script src=\"https://cdn.syncfusion.com/ej2/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"control-section\">\n    <div class=\"content-wrapper\">\n        <div id=\"topToolbar\" style=\"top:0px\"></div>\n        <div id=\"magnificationToolbar\"></div>\n        <div id=\"pdfViewer\" style=\"height:640px; width:100%;\"></div>\n        <input type=\"file\" id=\"fileUpload\" accept=\".pdf\" style=\"display:block;visibility:hidden;width:0;height:0;\">\n        <div id=\"popup\"></div>\n        <div id=\"textSearchBox\">\n            <div id=\"searchContainer\">\n                <span class=\"e-input-group e-custom-search-input\">\n                    <input type=\"text\" id=\"searchInput\" placeholder=\"Find in document\" class=\"e-input\">\n                    <span class=\"e-input-group-icon e-pv-search-icon\" id=\"searchBtn\"></span>\n                </span>\n                <button id=\"previousSearch\" class=\"search-button\" style=\"margin-left:5px\"></button>\n                <button id=\"nextSearch\" class=\"search-button\"></button>\n            </div>\n            <div id=\"matchCaseContainer\" style=\"margin-top:8px\">\n                <input id=\"matchCase\" type=\"checkbox\">\n            </div>\n        </div>\n    </div>\n</div>\n\n\n\n\n","index.js":"{{ripple}}/*jshint esversion: 6 */\r\nvar inputTemplate = '<div class=\"\"><input type=\"text\" class=\"e-input-group e-pv-current-page-number\" id=\"currentPage\" /></div>';\r\nvar ele = '<div class=\"\"><span class=\"e-pv-total-page-number\" id=\"totalPage\">of 0</span></div>';\r\nvar isBookmarkOpen = false;\r\nvar isBookmarkClick = false;\r\nvar isBookmarkView = false;\r\nvar isTextSearchBoxOpen = false;\r\nvar bookmarkPopup;\r\nvar textSearchPopup;\r\nvar toolbarObj;\r\nvar viewer;\r\nvar currentPageBox;\r\nvar searchInput;\r\nvar searchButton;\r\nvar openDocument;\r\nvar matchCase = false;\r\nvar fileInputElement;\r\nvar filename;\r\nvar treeObj;\r\n\r\n    toolbarObj = new ej.navigations.Toolbar({\r\n        items: [\r\n            { prefixIcon: 'e-pv-open-document', tooltipText: 'Open', id: 'openButton', click: openClicked },\r\n            { prefixIcon: 'e-pv-bookmark-icon', tooltipText: 'Bookmark', id: 'bookmarkButton', click: bookmarkClicked },\r\n            { prefixIcon: 'e-pv-previous-page-navigation-icon', id: 'previousPage', tooltipText: 'Previous Page', align: 'Center', click: previousClicked.bind(this) },\r\n            { prefixIcon: 'e-pv-next-page-navigation-icon', id: 'nextPage', tooltipText: 'Next Page', align: 'Center', click: nextClicked.bind(this) },\r\n            { template: inputTemplate, tooltipText: 'Page Number', align: 'Center' },\r\n            { template: ele, tooltipText: 'Page Number', align: 'Center' },\r\n            { prefixIcon: 'e-pv-search-icon', tooltipText: 'Text Search', align: 'Right', click: searchClicked.bind(this) },\r\n            { prefixIcon: 'e-pv-print-document-icon', tooltipText: 'Print', align: 'Right', click: printClicked.bind(this) },\r\n            { prefixIcon: 'e-pv-download-document-icon', tooltipText: 'Download', align: 'Right', click: downloadClicked.bind(this) }\r\n        ]\r\n    });\r\n    toolbarObj.appendTo('#topToolbar');\r\n    var magnificationToolbar = new ej.navigations.Toolbar({\r\n        items: [\r\n            { prefixIcon: 'e-pv-fit-page-icon', id: 'fitPage', tooltipText: 'Fit to page', click: pageFitClicked.bind(this) },\r\n            { prefixIcon: 'e-pv-zoom-in-icon', id: 'zoomIn', tooltipText: 'Zoom in', click: zoomInClicked.bind(this) },\r\n            { prefixIcon: 'e-pv-zoom-out-icon' , id: 'zoomOut', tooltipText: 'Zoom out', click: zoomOutClicked.bind(this) },\r\n        ]\r\n    });\r\n    magnificationToolbar.appendTo('#magnificationToolbar');\r\n    viewer = new ej.pdfviewer.PdfViewer({\r\n        enableToolbar: false,\r\n        enableNavigationToolbar: false,\r\n        enableThumbnail: false,\r\n        documentPath: 'Hive_Succinctly.pdf',\r\n        serviceUrl: 'https://ej2services.syncfusion.com/production/web-services/api/pdfviewer'\r\n    });\r\n    ej.pdfviewer.PdfViewer.Inject(ej.pdfviewer.TextSelection, ej.pdfviewer.TextSearch, ej.pdfviewer.Print, ej.pdfviewer.Navigation, ej.pdfviewer.Magnification, ej.pdfviewer.BookmarkView, ej.pdfviewer.ThumbnailView, ej.pdfviewer.LinkAnnotation);\r\n    viewer.appendTo('#pdfViewer');\r\n    isBookmarkView = false;\r\n    document.getElementById('fileUpload').addEventListener('change', readFile, false);\r\n    currentPageBox = document.getElementById('currentPage');\r\n    currentPageBox.value = '1';\r\n    searchInput = document.getElementById('searchInput');\r\n    openDocument = document.getElementById('fileupload');\r\n    bookmarkPopup = new ej.popups.Dialog({\r\n        showCloseIcon: true, header: \"Bookmarks\", closeOnEscape: false, isModal: false, target: document.getElementById('pdfViewer'),\r\n        content: '<div class=\"e-pv-bookmarks\" id=\"bookmarkview\"></div>',\r\n        buttons: [{\r\n            buttonModel: {},\r\n        }], position: { X: 'left', Y: 'top' }, cssClass: 'e-bookmark-popup', beforeClose: function () {\r\n           isBookmarkOpen = false;\r\n        }\r\n    });\r\n    bookmarkPopup.appendTo('#popup');\r\n    textSearchPopup = new ej.popups.Dialog({\r\n        showCloseIcon: false, closeOnEscape: false, isModal: false, target: document.getElementById('pdfViewer'),\r\n        buttons: [{\r\n            buttonModel: {},\r\n        }], position: { X: 'right', Y: 'top' }, cssClass: 'e-text-search-popup',\r\n    });\r\n    textSearchPopup.appendTo('#textSearchBox');\r\n    var previousSearch = new ej.buttons.Button({ iconCss: 'e-pv-previous-search' });\r\n    previousSearch.appendTo('#previousSearch');\r\n    var nextSearch = new ej.buttons.Button({ iconCss: 'e-pv-next-search-btn' });\r\n    nextSearch.appendTo('#nextSearch');\r\n    var matchCaseCheck = new ej.buttons.CheckBox({ label: 'Match case', change: checkBoxChanged });\r\n    matchCaseCheck.appendTo('#matchCase');\r\n    viewer.pageChange = function (args) {\r\n        currentPageBox.value = viewer.currentPageNumber.toString();\r\n        updatePageNavigation();\r\n    };\r\n    viewer.documentLoad = function (args) {\r\n\r\n        document.getElementById('totalPage').textContent = 'of ' + viewer.pageCount;\r\n        updatePageNavigation();\r\n    };\r\n    searchButton = document.getElementById('searchBtn');\r\n    searchInput.addEventListener('focus', function () { searchInput.parentElement.classList.add('e-input-focus'); });\r\n    searchInput.addEventListener('blur', function () { searchInput.parentElement.classList.remove('e-input-focus'); });\r\n    searchInput.addEventListener('keypress', searchInputKeypressed);\r\n    document.getElementById('previousSearch').addEventListener('click', previousSearchClicked);\r\n    document.getElementById('nextSearch').addEventListener('click', nextSearchClicked);\r\n    searchButton.addEventListener('click', searchClickHandler);\r\n    currentPageBox.addEventListener('keypress', onCurrentPageBoxKeypress);\r\n    currentPageBox.addEventListener('click', onCurrentPageBoxClicked);\r\n    bookmarkPopup.hide();\r\n    textSearchPopup.hide();\r\n    enableNextButton(false);\r\n    enablePrevButton(false);\r\n};\r\nfunction previousClicked(args) {\r\n    hidePopups();\r\n    viewer.navigation.goToPreviousPage();\r\n}\r\nfunction hidePopups() {\r\n    isBookmarkOpen = false;\r\n    isTextSearchBoxOpen = false;\r\n    bookmarkPopup.hide();\r\n    textSearchPopup.hide();\r\n}\r\nfunction bookmarkClicked() {\r\n    textSearchPopup.hide();\r\n    if (!isBookmarkOpen) {\r\n        var bookmarkDetails = viewer.bookmark.getBookmarks();\r\n        if (bookmarkDetails.bookmarks) {\r\n            if (!isBookmarkView) {\r\n                var bookmarks = bookmarkDetails.bookmarks.bookMark;\r\n                treeObj = new ej.navigations.TreeView({\r\n                    fields: {\r\n                        dataSource: bookmarks,\r\n                        id: 'Id',\r\n                        child: 'Child',\r\n                        text: 'Title',\r\n                        hasChildren: 'HasChild',\r\n                    }, nodeSelected: nodeClick\r\n                });\r\n                isBookmarkView = true;\r\n                treeObj.appendTo('#bookmarkview');\r\n                ['mouseover', 'keydown'].forEach( (evt) => document.getElementById(\"bookmarkview\").addEventListener(evt, (event) => {\r\n                    setHeight(event.target); }));\r\n            }\r\n            bookmarkPopup.show();\r\n            isBookmarkOpen = true;\r\n            isBookmarkClick = true;\r\n        }\r\n        else {\r\n            toolbarObj.enableItems(document.getElementById('bookmarkButton'), false);\r\n            isBookmarkOpen = false;\r\n        }\r\n    }\r\n    else {\r\n        if (!isBookmarkClick) {\r\n            bookmarkPopup.show();\r\n            isBookmarkClick = true;\r\n        } else {\r\n            bookmarkPopup.hide();\r\n            isBookmarkClick = false;\r\n        }  \r\n    }\r\n}\r\nfunction nextClicked(args) {\r\n    hidePopups();\r\n    viewer.navigation.goToNextPage();\r\n}\r\nfunction searchClicked(args) {\r\n    bookmarkPopup.hide();\r\n    if (!isTextSearchBoxOpen) {\r\n        textSearchPopup.show();\r\n    }\r\n    else {\r\n        viewer.textSearch.cancelTextSearch();\r\n        textSearchPopup.hide();\r\n    }\r\n    isTextSearchBoxOpen = !isTextSearchBoxOpen;\r\n}\r\nfunction printClicked(args) {\r\n    hidePopups();\r\n    viewer.print.print();\r\n}\r\nfunction downloadClicked(args) {\r\n    hidePopups();\r\n    viewer.download();\r\n}\r\nfunction pageFitClicked(args) {\r\n    hidePopups();\r\n    viewer.magnification.fitToPage();\r\n    updateZoomButtons();\r\n    toolbarObj.enableItems(document.getElementById('fitPage'), false);\r\n}\r\nfunction zoomInClicked(args) {\r\n    hidePopups();\r\n    viewer.magnification.zoomIn();\r\n    updateZoomButtons();\r\n}\r\nfunction zoomOutClicked(args) {\r\n    hidePopups();\r\n    viewer.magnification.zoomOut();\r\n    updateZoomButtons();\r\n}\r\n\r\nfunction readFile(args) {\r\n    // tslint:disable-next-line\r\n    var upoadedFiles = args.target.files;\r\n    if (args.target.files[0] !== null) {\r\n        var uploadedFile = upoadedFiles[0];\r\n        filename = upoadedFiles[0].name;\r\n        if (uploadedFile) {\r\n            var reader = new FileReader();\r\n            reader.readAsDataURL(uploadedFile);\r\n            // tslint:disable-next-line\r\n            reader.onload = function (e) {\r\n                var uploadedFileUrl = e.currentTarget.result;\r\n                viewer.load(uploadedFileUrl, null);\r\n                currentPageBox.value = '1';\r\n                document.getElementById(\"bookmarkview\").innerHTML = \"\";\r\n                isBookmarkView = false;\r\n                isBookmarkOpen = false;\r\n                viewer.fileName = filename;\r\n            \r\n        }\r\n    }\r\n}\r\n\r\nfunction openClicked() {\r\n    document.getElementById('fileUpload').click();\r\n}\r\nfunction onCurrentPageBoxKeypress(event) {\r\n    if ((event.which < 48 || event.which > 57) && event.which !== 8 && event.which !== 13) {\r\n        event.preventDefault();\r\n        return false;\r\n    }\r\n    else {\r\n        var currentPageNumber = parseInt(currentPageBox.value);\r\n        if (event.which === 13) {\r\n            if (currentPageNumber > 0 && currentPageNumber <= viewer.pageCount) {\r\n                viewer.navigation.goToPage(currentPageNumber);\r\n            }\r\n            else {\r\n                currentPageBox.value = viewer.currentPageNumber.toString();\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n}\r\nfunction onCurrentPageBoxClicked() {\r\n    currentPageBox.select();\r\n    currentPageBox.focus();\r\n}\r\nfunction updatePageNavigation() {\r\n    if (viewer.currentPageNumber === 1) {\r\n        toolbarObj.enableItems(document.getElementById('previousPage'), false);\r\n        toolbarObj.enableItems(document.getElementById('nextPage'), true);\r\n    }\r\n    else if (viewer.currentPageNumber === viewer.pageCount) {\r\n        toolbarObj.enableItems(document.getElementById('previousPage'), true);\r\n        toolbarObj.enableItems(document.getElementById('nextPage'), false);\r\n    }\r\n    else {\r\n        toolbarObj.enableItems(document.getElementById('previousPage'), true);\r\n        toolbarObj.enableItems(document.getElementById('nextPage'), true);\r\n    }\r\n}\r\nfunction updateZoomButtons() {\r\n    if (viewer.zoomPercentage <= 50) {\r\n        toolbarObj.enableItems(document.getElementById('zoomIn'), true);\r\n        toolbarObj.enableItems(document.getElementById('zoomOut'), false);\r\n        toolbarObj.enableItems(document.getElementById('fitPage'), true);\r\n    }\r\n    else if (viewer.zoomPercentage >= 400) {\r\n        toolbarObj.enableItems(document.getElementById('zoomIn'), false);\r\n        toolbarObj.enableItems(document.getElementById('zoomOut'), true);\r\n        toolbarObj.enableItems(document.getElementById('fitPage'), true);\r\n    }\r\n    else {\r\n        toolbarObj.enableItems(document.getElementById('zoomIn'), true);\r\n        toolbarObj.enableItems(document.getElementById('zoomOut'), true);\r\n        toolbarObj.enableItems(document.getElementById('fitPage'), true);\r\n    }\r\n}\r\nfunction nodeClick(args) {\r\n    var bookmarksDetails = viewer.bookmark.getBookmarks();\r\n    setHeight(args.node);\r\n    var bookmarksDestination = bookmarksDetails.bookmarksDestination;\r\n    var bookid = Number(args.nodeData.id);\r\n    var pageIndex = bookmarksDestination.bookMarkDestination[bookid].PageIndex;\r\n    var Y = bookmarksDestination.bookMarkDestination[bookid].Y;\r\n    viewer.bookmark.goToBookmark(pageIndex, Y);\r\n    return false;\r\n}\r\n// tslint:disable-next-line\r\nfunction setHeight(element) {\r\n    if (treeObj.fullRowSelect) {\r\n        if (element.classList.contains('e-treeview')) {\r\n            element = element.querySelector('.e-node-focus').querySelector('.e-fullrow');\r\n        }\r\n        else if (element.classList.contains('e-list-parent')) {\r\n            element = element.querySelector('.e-fullrow');\r\n        }\r\n        else if (element.classList.value !== ('e-fullrow') && element.closest('.e-list-item')) {\r\n            element = element.closest('.e-list-item').querySelector('.e-fullrow');\r\n        }\r\n        if (element.nextElementSibling) {\r\n            element.style.height = element.nextElementSibling.offsetHeight + 'px';\r\n        }\r\n    }\r\n}\r\nfunction searchInputKeypressed(event) {\r\n    enablePrevButton(true);\r\n    enableNextButton(true);\r\n    if (event.which === 13) {\r\n        initiateTextSearch();\r\n        updateSearchInputIcon(false);\r\n    }\r\n}\r\nfunction searchClickHandler() {\r\n    if (searchButton.classList.contains('e-pv-search-icon')) {\r\n        viewer.textSearch.cancelTextSearch();\r\n        initiateTextSearch();\r\n    }\r\n    else if (searchButton.classList.contains('e-pv-search-close')) {\r\n        searchInput.value = '';\r\n        searchInput.focus();\r\n        viewer.textSearch.cancelTextSearch();\r\n    }\r\n}\r\nfunction initiateTextSearch() {\r\n    var searchString = searchInput.value;\r\n    viewer.textSearch.searchText(searchString, matchCase);\r\n}\r\nfunction previousSearchClicked() {\r\n    var searchString = searchInput.value;\r\n    if (searchString) {\r\n        viewer.textSearch.searchPrevious();\r\n    }\r\n}\r\nfunction nextSearchClicked() {\r\n    var searchString = searchInput.value;\r\n    if (searchString) {\r\n        viewer.textSearch.searchNext();\r\n    }\r\n}\r\nfunction checkBoxChanged(args) {\r\n    if (args.checked) {\r\n        matchCase = true;\r\n    }\r\n    else {\r\n        matchCase = false;\r\n    }\r\n    initiateTextSearch();\r\n}\r\nfunction enablePrevButton(isEnable) {\r\n    var previousSearchButton = document.getElementById('previousSearch');\r\n    if (isEnable) {\r\n        previousSearchButton.removeAttribute('disabled');\r\n    }\r\n    else {\r\n        previousSearchButton.disabled = true;\r\n    }\r\n}\r\nfunction enableNextButton(isEnable) {\r\n    var nextSearchButton = document.getElementById('nextSearch');\r\n    if (isEnable) {\r\n        nextSearchButton.removeAttribute('disabled');\r\n    }\r\n    else {\r\n        nextSearchButton.disabled = true;\r\n    }\r\n}\r\nfunction updateSearchInputIcon(isEnable) {\r\n    if (isEnable) {\r\n        searchButton.classList.remove('e-pv-search-close');\r\n        searchButton.classList.add('e-pv-search-icon');\r\n    }\r\n    else {\r\n        searchButton.classList.remove('e-pv-search-icon');\r\n        searchButton.classList.add('e-pv-search-close');\r\n    }\r\n}\r\n\r\n\r\n"}