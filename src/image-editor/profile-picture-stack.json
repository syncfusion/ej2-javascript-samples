{"index.html":"<html><head><script src=\"https://cdn.syncfusion.com/ej2/21.1.35/dist/ej2.min.js\" type=\"text/javascript\"></script>\n    <link href=\"https://cdn.syncfusion.com/ej2/21.1.35/material.css\" rel=\"stylesheet\">\n\n    <link href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\" rel=\"stylesheet\">\n\n    <style>\n            body{\n                touch-action:none;\n            }\n        </style></head><body><div class=\"stackblitz-container {{theme}}\"><div class=\"col-lg-12 control-section e-img-editor-sample\">\n    <div class=\"e-profile e-hide\">\n        <div class=\"e-custom-wrapper\">\n            <canvas id=\"img-canvas\" style=\"max-width: 200px; max-height: 200px;\"></canvas>\n            <img alt=\"img\" id=\"custom-img\" crossorigin=\"anonymous\" src=\"//ej2.syncfusion.com/javascript/demos/src/image-editor/images/profile.png\" style=\"display: none;\">\n            <input type=\"file\" id=\"img-upload\" style=\"display:none\" accept=\"image/*\">\n        </div>\n        <span id=\"custom-edit\" class=\"e-custom-edit\" contenteditable=\"false\">\n            <span class=\"e-custom-icon sb-icons\" contenteditable=\"false\"></span>\n        </span>\n    </div>\n</div>\n<div id=\"profile-dialog\">\n    <div id=\"image-editor\"></div>\n</div>\n\n\n\n\n<style>\n    .e-img-editor-sample,\n\t.e-img-editor-sample .control-wrapper {\n\t\tposition: relative;\n\t}\n\n    .e-profile {\n        width: 200px;\n        height: 200px;\n        position: absolute;\n        left: 50%;\n        -webkit-transform: translate(-50%, 30%);\n        transform: translate(-50%, 30%);\n        border-radius: 50%;\n    }\n\n    .e-custom-wrapper {\n        position: relative;\n    }\n\n    .e-custom-edit {\n        position: absolute;\n        width: 36px;\n        height: 36px;\n        border-radius: 50%;\n        background-color: blue;\n        top: calc(100% - 54px);\n        left: calc(100% - 47px);\n    }\n\n    .e-custom-icon::before {\n        content: '\\e911';\n        font-size: 28px;\n        color: white;\n        left: 5px;\n        top: 4px;\n\tline-height: initial;\n        position: absolute;\n    }\n\n    #custom-edit:hover {\n\t    cursor: pointer;\n    }\n\n    canvas#img-canvas {\n        border-radius: 50%;\n        border: 4px solid darkgrey;\n    }\n\n    .e-img-custom-open {\n        float: left;\n        margin-left: 0 !important;\n    }\n\n    .e-img-custom-reset {\n        float: left;\n    }\n\n    .tailwind .e-custom-icon::before,\n    .tailwind-dark .e-custom-icon::before {\n        top: 6px;\n    }\n\n    .e-bigger #profile-dialog .e-dlg-header {\n        font-size: 18px !important;\n    }\n\n    .highcontrast .e-custom-img-btn,\n    .fabric .e-custom-img-btn,\n    .fabric-dark .e-custom-img-btn {\n        padding: 2px 10px !important;\n    }\n\n    .e-bigger .e-custom-img-btn {\n        font-size: 14px !important;\n        padding: 6px 10px !important;\n    }\n\n    .e-bigger.highcontrast .e-custom-img-btn,\n    .e-bigger.fabric .e-custom-img-btn,\n    .e-bigger.fabric-dark .e-custom-img-btn,\n    .e-bigger.material .e-custom-img-btn,\n    .e-bigger.material-dark .e-custom-img-btn {\n        padding: 3px 10px !important;\n    }\n    .e-bigger.bootstrap .e-custom-img-btn,\n    .e-bigger.bootstrap-dark .e-custom-img-btn {\n        padding: 1px 10px !important;\n    }\n\t\n    .e-img-editor-sample {\n        min-height: 450px;\n    }\n    .e-img-editor-sample .e-hide {\n\tdisplay: none;\n    }\n    .material3 .e-custom-img-btn,\n    .material3-dark .e-custom-img-btn,\n    .e-bigger.material3 .e-custom-img-btn,\n    .e-bigger.material3-dark .e-custom-img-btn\n    { \n     \tmargin-left: 3px !important;\n    }\n</style>\n</div></body></html>","index.js":"{{ripple}}/**\n * Profile Picture sample\n */\n\n \n  var img = document.querySelector('#custom-img');\n  var imageEditor, imgSrc = '';\n  img.onload = function () {\n      if (imgSrc === '') {\n         var canvas = document.querySelector('#img-canvas');\n         var ctx = canvas.getContext('2d');\n         canvas.width = img.width < img.height ? img.width : img.height;\n         canvas.height = canvas.width;\n         ctx.drawImage(img, 0, 0, canvas.width, canvas.height);\n         document.querySelector('.e-profile').classList.remove('e-hide');\n      }\n  };\n  var dialogObj = new ej.popups.Dialog({\n      header: 'Edit Profile Image',\n      animationSettings: { effect: 'None' },\n      showCloseIcon: true,\n      closeOnEscape: true,\n      target: '.control-section',\n      width: '340px',\n      height: '400px',\n      visible: false,\n      position: {X: 'center', Y: 0 },\n      close: function () {\n          var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n          imageEditor.destroy();\n          document.getElementById('image-editor').className = '';\n      },\n      open: function () {\n          imageEditor = new ej.imageeditor.ImageEditor({\n              fileOpened: function () {\n                  var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n                  imageEditor.select('circle');\n              },\n              created: function () {\n                var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n                if (imageEditor.theme && window.location.href.split('#')[1]) {\n                    imageEditor.theme = window.location.href.split('#')[1].split('/')[1];\n                }\n              },\n              toolbar: []\n          });\n          imageEditor.appendTo('#image-editor');\n      },\n      buttons: [\n            {\n                click: function () {\n                    document.getElementById('img-upload').click();\n                },\n                buttonModel: { content: 'Open', isPrimary: false, cssClass: 'e-custom-img-btn e-img-custom-open' }\n            },{\n              click: function () {\n                  var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n                  imageEditor.reset();\n              },\n              buttonModel: { content: 'Reset', isPrimary: false, cssClass: 'e-custom-img-btn e-img-custom-reset' }\n          },\n          {\n              click: function () {\n                  var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n                  imageEditor.rotate(-90);\n              },\n              buttonModel: { content: 'Rotate', isPrimary: false, cssClass: 'e-custom-img-btn e-img-custom-rotate' }\n          },\n          {\n            click: function () {\n                var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n                imageEditor.crop();\n                var croppedData = imageEditor.getImageData();\n                var canvas = document.querySelector('#img-canvas');\n                var ctx = canvas.getContext('2d');\n                var parentDiv = document.querySelector('.e-profile');\n                var tempCanvas = parentDiv.appendChild(ej.base.createElement('canvas'));\n                var tempContext = tempCanvas.getContext('2d');\n                tempCanvas.width = croppedData.width;\n                tempCanvas.height = croppedData.height;\n                tempContext.putImageData(croppedData, 0, 0);\n                ctx.clearRect(0, 0, canvas.width, canvas.height);\n                ctx.drawImage(tempCanvas, 0, 0, canvas.width, canvas.height);\n                tempCanvas.remove();\n                parentDiv.style.borderRadius = '100%';\n                canvas.style.backgroundColor = '#fff';\n                dialogObj.hide();\n                if (imgSrc !== '') {\n                    var img = document.querySelector('#custom-img');\n                    img.src = imgSrc;\n                }\n            },\n              buttonModel: { content: 'Apply', isPrimary: true, cssClass: 'e-custom-img-btn e-img-custom-apply' }\n          }]\n  });\n  dialogObj.appendTo('#profile-dialog');\n  document.getElementById('custom-edit').onclick = function () {\n    dialogObj.show();\n    var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n    var img = document.querySelector('#custom-img');\n    imageEditor.open(img.src);\n  };\n  document.getElementById('img-upload').onchange = function (args) {\n    var URL = window.URL;\n    var url = URL.createObjectURL(args.target.files[0]);\n    var imageEditor = ej.base.getComponent(document.getElementById('image-editor'), 'image-editor');\n    imageEditor.open(url.toString());\n    document.getElementById('img-upload').value = null;\n    imgSrc = url.toString();\n  };\n  var imageHide = document.getElementsByClassName('sb-desktop-wrapper')[0];\n  if (imageHide) {\n    document.getElementsByClassName('sb-desktop-wrapper')[0].onclick = function (args) {\n    if (args.target.className.indexOf('col-lg-12 control-section e-img-editor-sample') > -1 || args.target.className.indexOf('sb-content') > -1) {\n        dialogObj.hide();\n    }\n  };\n  }\n \n\n"}